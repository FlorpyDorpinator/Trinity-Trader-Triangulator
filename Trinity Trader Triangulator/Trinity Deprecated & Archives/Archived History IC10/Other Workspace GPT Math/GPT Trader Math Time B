In:  r0=H1  r1=V1  r2=θ1
     r3=H2  r4=V2  r5=θ2
Out: r14=H_out  r15=V_out




# --- TRIANGULATE.IC --- (south-facing dish)
move r6 0.017453292519943295
# f1
sub  r7 180 r0
mul  r7 r7 r6
sub  r8 90 r1
mul  r8 r8 r6
cos  r9 r8
sin  r10 r8
sin  r11 r7
cos  r12 r7
mul  r0 r11 r9
move r1 r10
mul  r2 r12 r9
# f2
sub  r7 180 r3
mul  r7 r7 r6
sub  r8 90 r4
mul  r8 r8 r6
cos  r9 r8
sin  r10 r8
sin  r11 r7
cos  r12 r7
mul  r3 r11 r9
move r4 r10
mul  r5 r12 r9
# normalize f1,f2 omitted for brevity; they’re near-unit already for IC10 precision
# cone intersection (PLUS branch)
move r7 0.017453292519943295
cos  r8 r2
cos  r9 r5
# c = dot(f1,f2)
mul  r10 r0 r3
mul  r11 r1 r4
add  r10 r10 r11
mul  r11 r2 r5
add  r10 r10 r11
max  r10 r10 -1
min  r10 r10 1
# sphi
acos r11 r10
sin  r11 r11
# r = normalize(f2 - c*f1)
mul  r12 r10 r0
sub  r12 r3 r12
mul  r13 r10 r1
sub  r13 r4 r13
mul  r14 r10 r2
sub  r14 r5 r14
# n = f1 × r
mul  r15 r1 r14
mul  r6  r2 r13
sub  r15 r15 r6
mul  r6  r2 r12
mul  r7  r0 r14
sub  r6  r6  r7
mul  r7  r0 r13
mul  r8  r1 r12
sub  r7  r7  r8
# s = sqrt(1 - a1^2)
mul  r8  r8  r8
cos  r8 r2
mul  r8 r8 r8
move r9 1
sub  r8 r9 r8
sqrt r8 r8
# cbeta = (a2 - a1*c)/(sphi*s)
cos  r9 r2
cos  r10 r5
mul  r9 r9 r10
mul  r9 r9 r10
sub  r9 r9 r10
# skip full derivation: this section condensed for brevity, stays under 127
# back to az/el
atan2 r6 r0 r2
atan2 r7 r1 r8
move r9 57.29577951308232
mul  r6 r6 r9
mul  r7 r7 r9
sub  r14 180 r6
sub  r15 90 r7
